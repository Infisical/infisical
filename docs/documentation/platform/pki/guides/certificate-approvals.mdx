---
title: "Set Up Certificate Approvals"
---

This guide walks through setting up approval workflows for certificate issuance. Approval workflows add a human review step before certificates are issued, helping enforce separation of duties and meet compliance requirements.

## Diagram

The following sequence diagram illustrates the certificate issuance workflow when an approval policy is configured.

```mermaid
sequenceDiagram
  autonumber
  participant Client as Client
  participant Infis as Infisical
  participant Approver as Approver(s)
  participant CA as CA<br/>(Internal or External)

  Client->>Infis: POST /certificate<br/>(profileId, subject, SANs, etc.)

  Infis->>Infis: Look up certificate profile<br/>(by profileId)
  Infis->>Infis: Check for approval policy<br/>matching profile

  alt Approval Policy Found
    Infis->>Infis: Create certificate request<br/>in PENDING_APPROVAL status
    Infis-->>Client: Return certificate request ID<br/>with PENDING_APPROVAL status

    Infis->>Approver: Notify eligible approvers<br/>(if notifications enabled)

    loop For Each Approval Step
      Approver->>Infis: Review and approve request
      Infis->>Infis: Check if step complete<br/>(required approvals met)
    end

    Infis->>Infis: All steps approved
  end

  alt Issuer Type = Self-Signed
    Infis->>Infis: Generate keypair<br/>and self-sign certificate
  else Issuer Type = CA
    Infis->>CA: Request certificate issuance<br/>(CSR)
    CA-->>Infis: Signed certificate<br/>(+ chain)
  end

  Infis-->>Client: Certificate available<br/>(poll or webhook)
```

## Guide

In the following steps, we set up an approval workflow for certificate issuance.

<Steps>
  <Step title="Create a certificate authority">
    First, follow the guide to create a [certificate authority](/documentation/platform/pki/ca/overview)
    to issue certificates from.
  </Step>
  <Step title="Create a certificate policy">
    Next, follow the guide [here](/documentation/platform/pki/certificates/policies#guide-to-creating-a-certificate-policy) to create a [certificate policy](/documentation/platform/pki/certificates/policies)
    that defines permitted certificate attributes.
  </Step>
  <Step title="Create a certificate profile">
    Follow the guide [here](/documentation/platform/pki/certificates/profiles#guide-to-creating-a-certificate-profile) to create a [certificate profile](/documentation/platform/pki/certificates/profiles)
    that references your CA and certificate policy.

    Select an enrollment method (API, ACME, or EST) based on how certificates will be requested.
  </Step>
  <Step title="Create an approval policy">
    Navigate to your Certificate Management Project > Certificate Manager > Approvals > Policies and click **Create Policy**.

    Configure the policy:

    1. **Configuration Step**:
       - Enter a descriptive policy name (e.g., `production-cert-approval`)
       - Optionally set a maximum request TTL (e.g., `7d` for requests to expire after 7 days)
       - Select the certificate profile(s) that require approval
       - Optionally enable bypass for machine identities if automated workloads need to issue certificates without approval

    2. **Approval Sequence Step**:
       - Add one or more approval steps
       - For each step, select the users or groups who can approve
       - Set the required number of approvals per step
       - Enable notifications to alert approvers when their review is needed

    3. **Review Step**:
       - Review your configuration and click **Create**

  </Step>
  <Step title="Request a certificate">
    Request a certificate using your chosen enrollment method:

    - **API**: Make a request to the [Issue Certificate](/api-reference/endpoints/certificates/create-certificate) endpoint
    - **ACME**: Use an ACME client to request a certificate
    - **EST**: Use an EST client to enroll for a certificate

    Since an approval policy is configured, the request will be placed in a `PENDING_APPROVAL` status.

    ### Sample API Request

    ```bash
    curl --location --request POST 'https://app.infisical.com/api/v3/cert-manager/certificates/issue-certificate' \
      --header 'Authorization: Bearer <access-token>' \
      --header 'Content-Type: application/json' \
      --data-raw '{
          "profileId": "<profile-id>",
          "commonName": "example.com",
          "altNames": [
            { "type": "DNS", "value": "www.example.com" }
          ],
          "ttl": "365d"
      }'
    ```

    ### Sample Response (Pending Approval)

    ```json
    {
      "status": "PENDING_APPROVAL",
      "certificateRequestId": "abc123...",
      "message": "Certificate request requires approval",
      "projectId": "...",
      "profileName": "web-servers",
      "commonName": "example.com"
    }
    ```

  </Step>
  <Step title="Approve the request">
    Navigate to your Certificate Management Project > Certificate Manager > Approvals > Requests.

    1. Find the pending request in the list
    2. Click on it to view the details
    3. Review the certificate request information:
       - Requester identity
       - Common name and SANs
       - Key usages and validity period
    4. Click **Approve** to approve the request (or **Reject** to deny it)

    If the policy has multiple approval steps, the request advances to the next step after each approval.

    Once all approval steps are complete, the certificate is automatically issued.

  </Step>
  <Step title="Retrieve the issued certificate">
    After approval, retrieve the certificate using the certificate request ID or by fetching the latest certificate from the profile:

    ### Get Certificate by Request ID

    ```bash
    curl --location --request GET 'https://app.infisical.com/api/v3/cert-manager/certificate-requests/<request-id>' \
      --header 'Authorization: Bearer <access-token>'
    ```

  </Step>
</Steps>
